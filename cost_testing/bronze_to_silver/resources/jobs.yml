resources:
  jobs:
    bronze_to_silver_xxs:
      name: bronze_to_silver_SQL_XXS
      tasks:
        - task_key: test_sql_xxs
          notebook_task:
            notebook_path: ../tests_sql/bronze_to_silver_sql.ipynb
            source: WORKSPACE
            warehouse_id: ${var.SQL_XXS}
            base_parameters:
              schema: SQL_XXS

    bronze_to_silver_xs:
      name: bronze_to_silver_SQL_XS
      tasks:
        - task_key: test_sql_xs
          notebook_task:
            notebook_path: ../tests/bronze_to_silver_sql.ipynb
            source: WORKSPACE
            warehouse_id: ${var.SQL_XS}
            base_parameters:
              schema: SQL_XS

    bronze_to_silver_s:
      name: bronze_to_silver_SQL_S
      tasks:
        - task_key: test_sql_s
          notebook_task:
            notebook_path: ../tests/bronze_to_silver_sql.ipynb
            source: WORKSPACE
            warehouse_id: ${var.SQL_S}
            base_parameters:
              schema:  SQL_S


    pipeline_performance_job:
      name: pipeline_performance
      tasks:
        - task_key: pipeline-task
          pipeline_task:
            pipeline_id: ${var.pipeline_performance}
      performance_target: PERFORMANCE_OPTIMIZED

    pipeline_standard_job:
      name: pipeline_standard
      tasks:
        - task_key: pipeline-task-c55ab738-4e8f-4f07-be72-a31666f0b64a
          pipeline_task:
            pipeline_id: ${var.pipeline_standard}
      performance_target: STANDARD

    pyspark_performance_job:
      name: pyspark_performance
      tasks:
        - task_key: pipeline-task
          notebook_task:
            notebook_path: ../tests_pyspark/bronze_to_silver.ipynb
            base_parameters:
              schema: pyspark_performance
              sample_size: ${var.sample_size}
      performance_target: PERFORMANCE_OPTIMIZED

    pyspark_standard_job:
      name: pyspark_standard
      tasks:
        - task_key: pipeline-task
          notebook_task:
            notebook_path: ../tests_pyspark/bronze_to_silver.ipynb
            base_parameters:
              schema: pyspark_standard
              sample_size: ${var.sample_size}
      performance_target: STANDARD